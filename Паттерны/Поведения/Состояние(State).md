Паттерн **"State"** (Состояние) в C++ используется для изменения поведения объекта в зависимости от его состояния. Он позволяет объекту изменять свое поведение при изменении внутреннего состояния, как если бы объект изменил свой класс.

### Основные элементы паттерна State

1. `State`: Интерфейс или абстрактный класс, объявляющий методы для обработки состояний.
2. `ConcreteState`: Конкретные реализации интерфейса `State` для различных состояний.
3. `Context`: Класс, который использует объект `State` для изменения своего поведения.
```cpp
#include <iostream>
#include <memory>

// Интерфейс State, объявляющий методы для обработки состояний
class State
{
public:
    virtual ~State() = default;
    virtual void handle() = 0;
};
```
Конкретное состояние `A`
```cpp
class ConcreteStateA : public State
{
public:
    void handle() override
    {
        std::cout << "Handling state A" << std::endl;
    }
};
```
Конкретное состояние `B`
```cpp
class ConcreteStateB : public State
{
public:
    void handle() override
    {
        std::cout << "Handling state B" << std::endl;
    }
};
```
Класс `Context`, использующий объект `State` для изменения своего поведения
```cpp
class Context
{
public:
    void setState(std::shared_ptr<State> state)
    {
        state_ = state;
    }

    void request()
    {
        if (state_)
        {
            state_->handle();
        }
    }

private:
    std::shared_ptr<State> state_;
};
```
main():
```cpp
int main()
{
    Context context;

    std::shared_ptr<State> stateA = std::make_shared<ConcreteStateA>();
    std::shared_ptr<State> stateB = std::make_shared<ConcreteStateB>();

    context.setState(stateA);
    context.request();

    context.setState(stateB);
    context.request();

    return 0;
}
```
### Описание:
1. `State`: Интерфейс, объявляющий метод handle, который будет реализован конкретными состояниями.
2. `ConcreteStateA` и `ConcreteStateB`: Конкретные реализации `State`, каждая из которых реализует метод handle для обработки своего состояния.
3. `Context`: Класс, который хранит текущее состояние объекта и использует его для изменения своего поведения. Метод setState позволяет изменять текущее состояние, а метод request вызывает обработку текущего состояния.
4. `main()`: Клиентский код, который создаёт объекты состояний и изменяет состояние объекта `Context`, вызывая соответствующие методы для обработки состояния.

### Преимущества:
- Упрощает добавление новых состояний и изменение поведения объектов на основе их состояний.
- Улучшает управляемость и поддерживаемость кода, изолируя логику состояния в отдельных классах.
- Устраняет громоздкие условные конструкции (например, `switch-case` или `if-else`) для управления состояниями.

### Недостатки:
- Увеличивает количество классов, что может усложнить код.
- Могут возникнуть проблемы с управлением состоянием, если количество состояний становится слишком большим.

Паттерн **State** особенно полезен, когда нужно изменять поведение объекта в зависимости от его состояния, предоставляя гибкость и улучшенную управляемость кода.